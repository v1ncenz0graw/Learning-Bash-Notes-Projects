Status: On-Going

Tags: #bash #linux #shell 

Links: [1-Basics](1-Basics.md) [README](README.md) [3-Setting_Up](3-Setting_Up.md) 
___

# Flow Control and Text Processing
## A) Test Operators
Bash lets us selectively execute commands when certain conditions of interest are met. We can use test operators to craft a wide variety of conditions, such as whether one value equals another value, whether a file is of a certain type, or whether one value is greater than another. We often rely on such tests to determine whether to continue running a block of code, so being able to construct them is fundamental to bash programming.

- File test Operators:

| Operator | Description                                       |
| :------: | ------------------------------------------------- |
|    -d    | Checks whether the file is a directory            |
|    -r    | Checks whether the file is readable               |
|    -x    | Checks whether the file is executable             |
|    -w    | Checks whether the file is writable               |
|    -f    | Checks whether the file is a regular file         |
|    -s    | Checks whether the file size is greater than zero |

-  String Comparison Operators:

| Operator | Description                                                  |
| :------: | ------------------------------------------------------------ |
|    =     | Checks whether a string is equal to another string           |
|    ==    | Synonym of = when used within [[]] constructs                |
|    !=    | Checks whether a string is not equal to another string       |
|    <     | Checks whether a string comes before another string<br>(A-z) |
|    >     | Checks whether a string comes after another string<br>(A-z)  |
|    -z    | Checks whether a string is null                              |
|    -n    | Checks whether a string is not null                          |

- Integer Comparison Operators

| Operator | Description                                        |
| :------: | -------------------------------------------------- |
|   -eq    | Checks whether a number is equal to another number |
|   -ne    | Checks whether a number is not equal               |
|   -ge    | Checks whether a number is greater than/equal to   |
|   -gt    | Checks whether a number is greater than            |
|   -lt    | Checks whether a number is less than               |
|   -le    | Checks whether a number is less than/ equal to     |

---

## B) if Conditions
 Syntax:
```bash
#!/usr/bin/env bash

if [[ condition ]]; then
	# Code Block if condition is true
else
	# Code Block if condition is flase
fi

# In some operating systems, such as those often used in containers,
# the default shell might not necessarily be bash.
# To account for these cases, you may want to use single square 
# brackets ([...]) rather than double to enclose your condition.
# This use of single brackets meets the Portable Operating System Interface 
# standard and should work on almost any Unix derivative, including Linux.
```

We can check for multiple conditions within one if condition using `&&` and  `||` operators:
```bash
#!/usr/bin/env bash

if [ condition_1 && condition_2 ] then
	.....
else
	.....
fi
```

As we continue with bash scripting, not all of commands will end with success due to some reasons like:
- Lack of permissions
- Absence of command package
- Lack of space when downloading package
- Lack of data connection

Thanks to if condition we can test the exit code of commands:
```bash
if touch test123; then
	echo "SUCCESS: file created"
else
	echo "ERROR: file already exists"
fi
```

We can use `else if` as `elif`

---

## C) Functions
Syntax:
```bash
#!/usr/bin/env bash

check_if_root(){
	if [ "${EUID}" -eq "0" ]; then
		return 0
	else 
		return 1
	fi
}

if check_if_root; then
	echo "User is root!"
else 
	ECHO "User is not root!"
fi
```

Accepting Arguments:
```bash
#!/usr/bin/env bash

print_args(){
	echo "First: ${1}, Second: ${2}, Third: ${3}"
}

print_args bir ikki uch
```

---

## D) Loops & Loop Control
### while:
In bash, while loops allow you to run a code block until a test returns a suc-
cessful exit status code.

Syntax:
```bash
while some_condition; do
	# Code block while condition is true
done
```

Example:
```bash
#!/usr/bin/env bash

target="browser_history.log"

while [ ! -f "${target}" ]; do
	echo "Logs are clear"
done

rm -rf ${target}
echo "Evidances are destroyed successfully!!!"
```
(You already get the idea, right?)

### until: 
Whereas _while_ runs as long as condition succeeds, _until_ runs as long as condition is fails

Syntax: 
```bash
until some_condition; do
	# Code block until condition succeeds
done
```
and usage is pretty same as _while_

### for
The for loop iterates over a sequence, such as a list of filenames or variables,
or even a group of values generated by running a command. Inside the for
loop, we define a block of commands that are run against each value in the
list, and each value in the list is assigned to a variable name we define.

Syntax:
```bash
for variable_name in LIST; do
	# Run some commands for each item in the sequence
done
```

A simple way to use a for loop is to execute the same command multiple
times:
```bash
#!/usr/bin/env bash

for ip_address in "$@"; do
	echo "Taking some action on IP address: ${ip_address}"
done

```

### break & continue

___
References: 
- Full List of file test operators are [here](https://ss64.com/bash/test.html)
- 

Created:: 2024-11-28 10:14